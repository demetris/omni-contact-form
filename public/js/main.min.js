function removeNonDigits(e){return e.replace(/[^0-9]+/g,"")}function removeChildren(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function addMessage(e){var t=document.getElementById("ocf-messages");removeChildren(t),t.insertAdjacentHTML("beforeend",'<p class="message ofc-message">'+e+"</p>")}function handleFormAlerts(e,t){var s,n,a;for(a in t)t.hasOwnProperty(a)&&(s=document.getElementById("ocf-alert-"+a),n=e.elements[a],removeChildren(s),s.insertAdjacentHTML("beforeend",OCF[t[a]]),n.classList.add("has-error"));e.addEventListener("focusin",function(e){var t=e.target;-1<["INPUT","TEXTAREA"].indexOf(t.nodeName)&&t.classList.contains("has-error")&&(s=document.getElementById("ocf-alert-"+t.name),t.classList.remove("has-error"),s&&s.lastChild&&(s.classList.add("is-fading-out"),setTimeout(function(){removeChildren(s),s.classList.remove("is-fading-out")},187.5)))})}function getFormData(e){var t,s={};for(t=0;t<e.elements.length;t++){if("TEXTAREA"===e.elements[t].tagName){var n=e.elements[t];s[n.name]=n.value}if("INPUT"===e.elements[t].tagName){var a=e.elements[t];s[a.name]=a.value}}return s}function submitForm(t){var s,n,a=document.getElementById("ocf-messages"),r=document.getElementById("ocf-progress"),d=document.getElementById("ocf-submit"),o=new XMLHttpRequest;t.addEventListener("submit",function(e){e.preventDefault(),r.classList.add("is-visible"),o.addEventListener("loadend",function(){d.blur(),r.classList.remove("is-visible")}),o.addEventListener("load",function(){n=JSON.parse(o.responseText),200===o.status&&n.nonce?addMessage(OCF["nonce-error"]):200===o.status&&!1===n.success?addMessage(OCF["mail-error"]):200===o.status&&n.alerts?handleFormAlerts(t,n.alerts):200!==o.status||n.alerts?addMessage("Submission failed. Status code is "+o.status+"."):(t.reset(),s=t.scrollHeight,OCF["hide-after"]?t.parentNode.removeChild(t):OCF["redirect-url"]?window.location=OCF["redirect-url"]:(a.classList.add("ocf-fade-in"),addMessage(OCF["thank-you"]),t.style.minHeight=s+"px",t.classList.add("ocf-fade-in"),removeChildren(t),t.insertAdjacentHTML("beforeend",'<h1 class="ocf-message-copy-element">'+n.data.heading+"</h1>"),t.insertAdjacentHTML("beforeend",n.data.body),t.classList.add("ocf-message-copy")))}),o.addEventListener("error",function(){addMessage(OCF["network-error"])}),o.open("POST",OCF.receiver),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("X-WP-Nonce",OCF.nonce),o.send(JSON.stringify(getFormData(t)))})}"classList"in document.documentElement&&document.addEventListener?document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("ocf"),t=document.getElementById("ocf-submit"),s=document.getElementById("ocf-answer");s&&s.addEventListener("keyup",function(){var e=s.value;s.value=removeNonDigits(e)}),e&&t&&(t.disabled=!1,submitForm(e))}):window.alert(OCF["old-browser"]);